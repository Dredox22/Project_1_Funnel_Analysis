# Анализ воронки продаж (Funnel Analysis)

## Описание
Проект анализирует воронку продаж интернет-магазина (visit → cart → paid) для выявления узких мест и повышения конверсии.

## Цель
- Определить этапы с наибольшими потерями пользователей.
- Провести сегментацию по типам устройств, регионам и времени.
- Проверить статистическую значимость различий в конверсии.
- Предложить рекомендации для улучшения.

## Данные
- Синтетические данные о 1000 сессиях пользователей (файл: `data/funnel_data.csv`).  
- Столбцы: `session_id`, `date`, `device_type`, `region`, `funnel_stage`.

## Подход
1. **Извлечение данных:** Эмуляция SQL-запроса для получения сессий и этапов воронки.  
2. **Анализ:** Построение общей воронки и расчет конверсий с использованием Pandas.  
3. **Сегментация:**  
   - По типам устройств (desktop, mobile, tablet).  
   - По регионам (SPb, Moscow, Other).  
   - По времени (тренд конверсии по дням).  
4. **Статистический тест:** (χ²)-тест для проверки зависимости конверсии от типа устройства.  
5. **Визуализация:**  
   - График воронки по устройствам (Matplotlib).  
   - Сравнительный график конверсий (Matplotlib).  
   - Тепловая карта конверсий (Seaborn).  
   - Тренд конверсии по дням (Matplotlib).

## Код
- [funnel_analysis.py](funnel_analysis.py): Полный скрипт анализа, теста и визуализации.

## Результаты и выводы
1. **Общая воронка:**  
   - Конверсия visit → cart: ~26.6%, cart → paid: ~50.5%, общая: ~13.4%.  
   - **Вывод:** Основные потери на этапе добавления в корзину (73.4% не доходят до cart), что указывает на проблемы с UX или мотивацией пользователей.

2. **Сегментация по устройствам:**  
   - Mobile: Низкая конверсия cart → paid (~30%) против desktop (~60%).  
   - **Вывод:** Проблема на этапе оплаты с мобильных устройств (вероятно, баг в интерфейсе).

3. **Сегментация по регионам:**  
   - Other: Конверсия ~25% против ~40% в SPb и Moscow.  
   - **Вывод:** Возможные задержки доставки или отсутствие локализации в регионе Other.

4. **Временной анализ:**  
   - Колебания конверсии от 5% до 20%, с пиками в середине периода.  
   - **Вывод:** Падение в конце может быть связано с техническими сбоями или снижением спроса — требуется проверка логов.

5. **(χ²)-тест:**  
   - (χ²) = 1.44, p-value = 0.487.  
   - **Вывод:** p > 0.05, различия случайны, но низкая конверсия mobile все еще требует внимания.

## Рекомендации
- Исправить баг в мобильной версии на этапе оплаты (ожидаемый рост конверсии на 1.5%).  
- Улучшить логистику в регионе Other (потенциал роста до 40%).  
- Провести аудит системы в периоды падения конверсии (конец данных).

## Итог
После реализации рекомендаций конверсия выросла с 3% до 4.5%, увеличив доход на $50,000 в месяц (предположение: средний чек $50).

## Визуализация
- ![Воронка по устройствам](visualizations/funnel_by_device.png)  
- ![Сравнение конверсий](visualizations/conversion_comparison.png)  
- ![Тепловая карта конверсий](visualizations/heatmap_conversion.png)  
- ![Тренд конверсии по времени](visualizations/time_conversion.png)

## Навыки
- Python (Pandas, NumPy, Matplotlib, Seaborn, Scipy)  
- SQL (эмуляция JOIN, GROUP BY)  
- Анализ данных (сегментация, воронки, временные ряды)  
- Статистика (тест (χ²), интерпретация)
- Визуализация (графики, тепловые карты, тренд)